# BabyBilling

## Описание

Проект состоит из двух микросервисов:

- **CDR Generator** — сервис, генерирующий случайные записи звонков (CDR)
- **BRT (Billing Real-Time)** — микросервис, принимающий данные через RabbitMQ и сохраняющий их в PostgreSQL

## Работа системы

### POST /generate/random

Эндпоинт доступен в CDR Generator.  
При вызове:

- Генерируется случайное количество записей звонков
- Записи сериализуются в формате JSON
- Отправляются через RabbitMQ в очередь, слушаемую микросервисом BRT

### BRT

Микросервис BRT:

- Принимает записи из RabbitMQ
- Проверяет наличие вызывающего абонента в таблице `subscribers`
- Сохраняет валидные записи в таблицу `romashka_calls_info` в базе PostgreSQL

## Хранение данных

- Основная база данных — **PostgreSQL**
- Для локальной разработки может использоваться **H2** (in-memory)

## Liquibase

Проект использует **Liquibase** для управления схемой базы данных.

- При первом запуске автоматически создаются все необходимые таблицы

## Используемые технологии

- Java 17
- Spring Boot
- Spring Data JPA
- RabbitMQ
- PostgreSQL
- Liquibase
- H2
